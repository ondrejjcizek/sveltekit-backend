import{o as Ee,t as xe}from"../chunks/5.fiZnZ7H9.js";import{S as st,b as it,d as ct,H as q,N as K,r as ne,o as ke,P as Ae,f as Xe,g as Oe,e as de,i as Pe,h as Te,s as B,j as H,k as Ze,l as gt}from"../chunks/singletons.0WwMJaGU.js";import{U as lt,N as mt,P as yt,a as vt,b as ft,H as wt,p as bt,u as St}from"../chunks/parse.RrI1B0B4.js";new URL("sveltekit-internal://");function Et(e,r){return e==="/"||r==="ignore"?e:r==="never"?e.endsWith("/")?e.slice(0,-1):e:r==="always"&&!e.endsWith("/")?e+"/":e}function xt(e){return e.split("%25").map(decodeURI).join("%25")}function kt(e){for(const r in e)e[r]=decodeURIComponent(e[r]);return e}function $e({href:e}){return e.split("#")[0]}const At=["href","pathname","search","toString","toJSON"];function Ot(e,r,s){const i=new URL(e);Object.defineProperty(i,"searchParams",{value:new Proxy(i.searchParams,{get(u,d){if(d==="get"||d==="getAll"||d==="has")return p=>(s(p),u[d](p));r();const v=Reflect.get(u,d);return typeof v=="function"?v.bind(u):v}}),enumerable:!0,configurable:!0});for(const u of At)Object.defineProperty(i,u,{get(){return r(),e[u]},enumerable:!0,configurable:!0});return Pt(i),i}function Pt(e){Object.defineProperty(e,"hash",{get(){throw new Error("Cannot access event.url.hash. Consider using `$page.url.hash` inside a component instead")}})}const $t="/__data.json",Rt=".html__data.json";function It(e){return e.endsWith(".html")?e.replace(/\.html$/,Rt):e.replace(/\/$/,"")+$t}function Lt(...e){let r=5381;for(const s of e)if(typeof s=="string"){let i=s.length;for(;i;)r=r*33^s.charCodeAt(--i)}else if(ArrayBuffer.isView(s)){const i=new Uint8Array(s.buffer,s.byteOffset,s.byteLength);let u=i.length;for(;u;)r=r*33^i[--u]}else throw new TypeError("value must be a string or TypedArray");return(r>>>0).toString(36)}const ut=window.fetch;window.fetch=(e,r)=>((e instanceof Request?e.method:r?.method||"GET")!=="GET"&&re.delete(Ce(e)),ut(e,r));const re=new Map;function jt(e){const r=atob(e),s=new Uint8Array(r.length);for(let i=0;i<r.length;i++)s[i]=r.charCodeAt(i);return s.buffer}function Nt(e,r){const s=Ce(e,r),i=document.querySelector(s);if(i?.textContent){let{body:u,...d}=JSON.parse(i.textContent);const v=i.getAttribute("data-ttl");return v&&re.set(s,{body:u,init:d,ttl:1e3*Number(v)}),i.getAttribute("data-b64")!==null&&(u=jt(u)),Promise.resolve(new Response(u,d))}return window.fetch(e,r)}function Ut(e,r,s){if(re.size>0){const i=Ce(e,s),u=re.get(i);if(u){if(performance.now()<u.ttl&&["default","force-cache","only-if-cached",void 0].includes(s?.cache))return new Response(u.body,u.init);re.delete(i)}}return window.fetch(r,s)}function Ce(e,r){let i=`script[data-sveltekit-fetched][data-url=${JSON.stringify(e instanceof Request?e.url:e)}]`;if(r?.headers||r?.body){const u=[];r.headers&&u.push([...new Headers(r.headers)].join(",")),r.body&&(typeof r.body=="string"||ArrayBuffer.isView(r.body))&&u.push(r.body),i+=`[data-hash="${Lt(...u)}"]`}return i}const Tt=/^(\[)?(\.\.\.)?(\w+)(?:=(\w+))?(\])?$/;function Ct(e){const r=[];return{pattern:e==="/"?/^\/$/:new RegExp(`^${Ft(e).map(i=>{const u=/^\[\.\.\.(\w+)(?:=(\w+))?\]$/.exec(i);if(u)return r.push({name:u[1],matcher:u[2],optional:!1,rest:!0,chained:!0}),"(?:/(.*))?";const d=/^\[\[(\w+)(?:=(\w+))?\]\]$/.exec(i);if(d)return r.push({name:d[1],matcher:d[2],optional:!0,rest:!1,chained:!0}),"(?:/([^/]+))?";if(!i)return;const v=i.split(/\[(.+?)\](?!\])/);return"/"+v.map((b,c)=>{if(c%2){if(b.startsWith("x+"))return Re(String.fromCharCode(parseInt(b.slice(2),16)));if(b.startsWith("u+"))return Re(String.fromCharCode(...b.slice(2).split("-").map(A=>parseInt(A,16))));const h=Tt.exec(b);if(!h)throw new Error(`Invalid param: ${b}. Params and matcher names can only have underscores and alphanumeric characters.`);const[,w,N,O,P]=h;return r.push({name:O,matcher:P,optional:!!w,rest:!!N,chained:N?c===1&&v[0]==="":!1}),N?"(.*?)":w?"([^/]*)?":"([^/]+?)"}return Re(b)}).join("")}).join("")}/?$`),params:r}}function Dt(e){return!/^\([^)]+\)$/.test(e)}function Ft(e){return e.slice(1).split("/").filter(Dt)}function Mt(e,r,s){const i={},u=e.slice(1),d=u.filter(p=>p!==void 0);let v=0;for(let p=0;p<r.length;p+=1){const b=r[p];let c=u[p-v];if(b.chained&&b.rest&&v&&(c=u.slice(p-v,p+1).filter(h=>h).join("/"),v=0),c===void 0){b.rest&&(i[b.name]="");continue}if(!b.matcher||s[b.matcher](c)){i[b.name]=c;const h=r[p+1],w=u[p+1];h&&!h.rest&&h.optional&&w&&b.chained&&(v=0),!h&&!w&&Object.keys(i).length===d.length&&(v=0);continue}if(b.optional&&b.chained){v++;continue}return}if(!v)return i}function Re(e){return e.normalize().replace(/[[\]]/g,"\\$&").replace(/%/g,"%25").replace(/\//g,"%2[Ff]").replace(/\?/g,"%3[Ff]").replace(/#/g,"%23").replace(/[.*+?^${}()|\\]/g,"\\$&")}function Ht({nodes:e,server_loads:r,dictionary:s,matchers:i}){const u=new Set(r);return Object.entries(s).map(([p,[b,c,h]])=>{const{pattern:w,params:N}=Ct(p),O={id:p,exec:P=>{const A=w.exec(P);if(A)return Mt(A,N,i)},errors:[1,...h||[]].map(P=>e[P]),layouts:[0,...c||[]].map(v),leaf:d(b)};return O.errors.length=O.layouts.length=Math.max(O.errors.length,O.layouts.length),O});function d(p){const b=p<0;return b&&(p=~p),[b,e[p]]}function v(p){return p===void 0?p:[u.has(p),e[p]]}}function De(e,r=JSON.parse){try{return r(sessionStorage[e])}catch{}}function Ie(e,r,s=JSON.stringify){const i=s(r);try{sessionStorage[e]=i}catch{}}class Le extends Error{constructor(r,s){super(r),this.name="DevalueError",this.path=s.join("")}}function Qe(e){return Object(e)!==e}const Vt=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function qt(e){const r=Object.getPrototypeOf(e);return r===Object.prototype||r===null||Object.getOwnPropertyNames(r).sort().join("\0")===Vt}function Bt(e){return Object.prototype.toString.call(e).slice(8,-1)}function Gt(e){switch(e){case'"':return'\\"';case"<":return"\\u003C";case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e<" "?`\\u${e.charCodeAt(0).toString(16).padStart(4,"0")}`:""}}function X(e){let r="",s=0;const i=e.length;for(let u=0;u<i;u+=1){const d=e[u],v=Gt(d);v&&(r+=e.slice(s,u)+v,s=u+1)}return`"${s===0?e:r+e.slice(s)}"`}function Jt(e,r){const s=[],i=new Map,u=[];for(const c in r)u.push({key:c,fn:r[c]});const d=[];let v=0;function p(c){if(typeof c=="function")throw new Le("Cannot stringify a function",d);if(i.has(c))return i.get(c);if(c===void 0)return lt;if(Number.isNaN(c))return mt;if(c===1/0)return yt;if(c===-1/0)return vt;if(c===0&&1/c<0)return ft;const h=v++;i.set(c,h);for(const{key:N,fn:O}of u){const P=O(c);if(P)return s[h]=`["${N}",${p(P)}]`,h}let w="";if(Qe(c))w=je(c);else switch(Bt(c)){case"Number":case"String":case"Boolean":w=`["Object",${je(c)}]`;break;case"BigInt":w=`["BigInt",${c}]`;break;case"Date":w=`["Date","${c.toISOString()}"]`;break;case"RegExp":const{source:O,flags:P}=c;w=P?`["RegExp",${X(O)},"${P}"]`:`["RegExp",${X(O)}]`;break;case"Array":w="[";for(let A=0;A<c.length;A+=1)A>0&&(w+=","),A in c?(d.push(`[${A}]`),w+=p(c[A]),d.pop()):w+=wt;w+="]";break;case"Set":w='["Set"';for(const A of c)w+=`,${p(A)}`;w+="]";break;case"Map":w='["Map"';for(const[A,D]of c)d.push(`.get(${Qe(A)?je(A):"..."})`),w+=`,${p(A)},${p(D)}`;w+="]";break;default:if(!qt(c))throw new Le("Cannot stringify arbitrary non-POJOs",d);if(Object.getOwnPropertySymbols(c).length>0)throw new Le("Cannot stringify POJOs with symbolic keys",d);if(Object.getPrototypeOf(c)===null){w='["null"';for(const A in c)d.push(`.${A}`),w+=`,${X(A)},${p(c[A])}`,d.pop();w+="]"}else{w="{";let A=!1;for(const D in c)A&&(w+=","),A=!0,d.push(`.${D}`),w+=`${X(D)}:${p(c[D])}`,d.pop();w+="}"}}return s[h]=w,h}const b=p(e);return b<0?`${b}`:`[${s.join(",")}]`}function je(e){const r=typeof e;return r==="string"?X(e):e instanceof String?X(e.toString()):e===void 0?lt.toString():e===0&&1/e<0?ft.toString():r==="bigint"?`["BigInt","${e}"]`:String(e)}const dt=new Set(["load","prerender","csr","ssr","trailingSlash","config"]);[...dt];const Kt=new Set([...dt]);[...Kt];function Yt(e){return e.filter(r=>r!=null)}class _e{constructor(r,s){this.status=r,typeof s=="string"?this.body={message:s}:s?this.body=s:this.body={message:`Error: ${r}`}}toString(){return JSON.stringify(this.body)}}class et{constructor(r,s){this.status=r,this.location=s}}class Fe extends Error{constructor(r,s,i){super(i),this.status=r,this.text=s}}const zt="x-sveltekit-invalidated",Wt="x-sveltekit-trailing-slash";function pe(e){return e instanceof _e||e instanceof Fe?e.status:500}function Xt(e){return e instanceof Fe?e.text:"Internal Error"}const z=De(st)??{},ae=De(it,bt)??{},oe=De(ct)??{},tt=history.pushState,he=history.replaceState;function Ne(e){z[e]=Te()}function nt(e,r){let s=e+1;for(;z[s];)delete z[s],s+=1;for(s=r+1;oe[s];)delete oe[s],s+=1}function Y(e){return location.href=e.href,new Promise(()=>{})}function at(){}function Zt(e,r){const s=Ht(e),i=e.nodes[0],u=e.nodes[1];i(),u();const d=document.documentElement,v=[],p=[];let b=null;const c={before_navigate:[],on_navigate:[],after_navigate:[]};let h={branch:[],error:null,url:null},w=!1,N=!1,O=!0,P=!1,A=!1,D=!1,Z=!1,se=!1,M,j=history.state?.[q],F=history.state?.[K];j||(j=F=Date.now(),he.call(history,{...history.state,[q]:j,[K]:F},"",location.href));const ge=z[j];ge&&(history.scrollRestoration="manual",scrollTo(ge.x,ge.y));let I,W,me;async function Me(){if(await(me||=Promise.resolve()),!me)return;me=null;const n=ee(h.url,!0);b=null;const t=W={},a=n&&await we(n);t===W&&(a&&(a.type==="redirect"?await ie(new URL(a.location,h.url).href,{},1,t):(a.props.page!==void 0&&(I=a.props.page),M.$set(a.props))),v.length=0)}function He(n){p.some(t=>t?.snapshot)&&(oe[n]=p.map(t=>t?.snapshot?.capture()))}function Ve(n){oe[n]?.forEach((t,a)=>{p[a]?.snapshot?.restore(t)})}function qe(){Ne(j),Ie(st,z),He(F),Ie(ct,oe),Ie(it,ae,Jt)}async function ie(n,t,a,o){return fe({type:"goto",url:ne(n),keepfocus:t.keepFocus,noscroll:t.noScroll,replace_state:t.replaceState,redirect_count:a,nav_token:o,accept:()=>{t.invalidateAll&&(se=!0)}})}async function Be(n){return b={id:n.id,promise:we(n).then(t=>(t.type==="loaded"&&t.state.error&&(b=null),t))},b.promise}async function ce(n){const t=s.find(a=>a.exec(Ye(n)));t&&await Promise.all([...t.layouts,t.leaf].map(a=>a?.[1]()))}function Ge(n){h=n.state;const t=document.querySelector("style[data-sveltekit]");t&&t.remove(),I=n.props.page,M=new e.root({target:r,props:{...n.props,stores:B,components:p},hydrate:!0}),Ve(F);const a={from:null,to:{params:h.params,route:{id:h.route?.id??null},url:new URL(location.href)},willUnload:!1,type:"enter",complete:Promise.resolve()};c.after_navigate.forEach(o=>o(a)),N=!0}async function Q({url:n,params:t,branch:a,status:o,error:l,route:f,form:_}){let g="never";for(const k of a)k?.slash!==void 0&&(g=k.slash);n.pathname=Et(n.pathname,g),n.search=n.search;const S={type:"loaded",state:{url:n,params:t,branch:a,error:l,route:f},props:{constructors:Yt(a).map(k=>k.node.component),page:I}};_!==void 0&&(S.props.form=_);let m={},$=!I,L=0;for(let k=0;k<Math.max(a.length,h.branch.length);k+=1){const E=a[k],U=h.branch[k];E?.data!==U?.data&&($=!0),E&&(m={...m,...E.data},$&&(S.props[`data_${L}`]=m),L+=1)}return(!h.url||n.href!==h.url.href||h.error!==l||_!==void 0&&_!==I.form||$)&&(S.props.page={error:l,params:t,route:{id:f?.id??null},state:{},status:o,url:new URL(n),form:_??null,data:$?m:I.data}),S}async function ye({loader:n,parent:t,url:a,params:o,route:l,server_data_node:f}){let _=null,g=!0;const S={dependencies:new Set,params:new Set,parent:!1,route:!1,url:!1,search_params:new Set},m=await n();if(m.universal?.load){let $=function(...y){for(const k of y){const{href:E}=new URL(k,a);S.dependencies.add(E)}};const L={route:new Proxy(l,{get:(y,k)=>(g&&(S.route=!0),y[k])}),params:new Proxy(o,{get:(y,k)=>(g&&S.params.add(k),y[k])}),data:f?.data??null,url:Ot(a,()=>{g&&(S.url=!0)},y=>{g&&S.search_params.add(y)}),async fetch(y,k){let E;y instanceof Request?(E=y.url,k={body:y.method==="GET"||y.method==="HEAD"?void 0:await y.blob(),cache:y.cache,credentials:y.credentials,headers:y.headers,integrity:y.integrity,keepalive:y.keepalive,method:y.method,mode:y.mode,redirect:y.redirect,referrer:y.referrer,referrerPolicy:y.referrerPolicy,signal:y.signal,...k}):E=y;const U=new URL(E,a);return g&&$(U.href),U.origin===a.origin&&(E=U.href.slice(a.origin.length)),N?Ut(E,U.href,k):Nt(E,k)},setHeaders:()=>{},depends:$,parent(){return g&&(S.parent=!0),t()},untrack(y){g=!1;try{return y()}finally{g=!0}}};_=await m.universal.load.call(null,L)??null}return{node:m,loader:n,server:f,universal:m.universal?.load?{type:"data",data:_,uses:S}:null,data:_??f?.data??null,slash:a.pathname===H||a.pathname===H+"/"?"always":m.universal?.trailingSlash??f?.slash}}function Je(n,t,a,o,l,f){if(se)return!0;if(!l)return!1;if(l.parent&&n||l.route&&t||l.url&&a)return!0;for(const _ of l.search_params)if(o.has(_))return!0;for(const _ of l.params)if(f[_]!==h.params[_])return!0;for(const _ of l.dependencies)if(v.some(g=>g(new URL(_))))return!0;return!1}function ve(n,t){return n?.type==="data"?n:n?.type==="skip"?t??null:null}function ht(n,t){if(!n)return new Set(t.searchParams.keys());const a=new Set([...n.searchParams.keys(),...t.searchParams.keys()]);for(const o of a){const l=n.searchParams.getAll(o),f=t.searchParams.getAll(o);l.every(_=>f.includes(_))&&f.every(_=>l.includes(_))&&a.delete(o)}return a}async function we({id:n,invalidating:t,url:a,params:o,route:l}){if(b?.id===n)return b.promise;const{errors:f,layouts:_,leaf:g}=l,S=[..._,g];f.forEach(x=>x?.().catch(()=>{})),S.forEach(x=>x?.[1]().catch(()=>{}));let m=null;const $=h.url?n!==h.url.pathname+h.url.search:!1,L=h.route?l.id!==h.route.id:!1,y=ht(h.url,a);let k=!1;const E=S.map((x,R)=>{const T=h.branch[R],C=!!x?.[0]&&(T?.loader!==x[1]||Je(k,L,$,y,T.server?.uses,o));return C&&(k=!0),C});if(E.some(Boolean)){try{m=await rt(a,E)}catch(x){return le({status:pe(x),error:await te(x,{url:a,params:o,route:{id:l.id}}),url:a,route:l})}if(m.type==="redirect")return m}const U=m?.nodes;let V=!1;const G=S.map(async(x,R)=>{if(!x)return;const T=h.branch[R],C=U?.[R];if((!C||C.type==="skip")&&x[1]===T?.loader&&!Je(V,L,$,y,T.universal?.uses,o))return T;if(V=!0,C?.type==="error")throw C;return ye({loader:x[1],url:a,params:o,route:l,parent:async()=>{const be={};for(let Se=0;Se<R;Se+=1)Object.assign(be,(await G[Se])?.data);return be},server_data_node:ve(C===void 0&&x[0]?{type:"skip"}:C??null,x[0]?T?.server:void 0)})});for(const x of G)x.catch(()=>{});const J=[];for(let x=0;x<S.length;x+=1)if(S[x])try{J.push(await G[x])}catch(R){if(R instanceof et)return{type:"redirect",location:R.location};let T=pe(R),C;if(U?.includes(R))T=R.status??T,C=R.error;else if(R instanceof _e)C=R.body;else{if(await B.updated.check())return await Y(a);C=await te(R,{params:o,url:a,route:{id:l.id}})}const ue=await Ke(x,J,f);return ue?await Q({url:a,params:o,branch:J.slice(0,ue.idx).concat(ue.node),status:T,error:C,route:l}):await We(a,{id:l.id},C,T)}else J.push(void 0);return await Q({url:a,params:o,branch:J,status:200,error:null,route:l,form:t?void 0:null})}async function Ke(n,t,a){for(;n--;)if(a[n]){let o=n;for(;!t[o];)o-=1;try{return{idx:o+1,node:{node:await a[n](),loader:a[n],data:{},server:null,universal:null}}}catch{continue}}}async function le({status:n,error:t,url:a,route:o}){const l={};let f=null;if(e.server_loads[0]===0)try{const m=await rt(a,[!0]);if(m.type!=="data"||m.nodes[0]&&m.nodes[0].type!=="data")throw 0;f=m.nodes[0]??null}catch{(a.origin!==ke||a.pathname!==location.pathname||w)&&await Y(a)}const g=await ye({loader:i,url:a,params:l,route:o,parent:()=>Promise.resolve({}),server_data_node:ve(f)}),S={node:await u(),loader:u,universal:null,server:null,data:null};return await Q({url:a,params:l,branch:[g,S],status:n,error:t,route:null})}function ee(n,t){if(Pe(n,H))return;const a=Ye(n.pathname);for(const o of s){const l=o.exec(a);if(l)return{id:n.pathname+n.search,invalidating:t,route:o,params:kt(l),url:n}}}function Ye(n){return xt(n.slice(H.length)||"/")}function ze({url:n,type:t,intent:a,delta:o}){let l=!1;const f=ot(h,a,n,t);o!==void 0&&(f.navigation.delta=o);const _={...f.navigation,cancel:()=>{l=!0,f.reject(new Error("navigation was cancelled"))}};return A||c.before_navigate.forEach(g=>g(_)),l?null:f}async function fe({type:n,url:t,popped:a,keepfocus:o,noscroll:l,replace_state:f,redirect_count:_=0,nav_token:g={},accept:S=at,block:m=at}){const $=ee(t,!1),L=ze({url:t,type:n,delta:a?.delta,intent:$});if(!L){m();return}const y=j,k=F;S(),A=!0,N&&B.navigating.set(L.navigation),W=g;let E=$&&await we($);if(!E){if(Pe(t,H))return await Y(t);E=await We(t,{id:null},await te(new Fe(404,"Not Found",`Not found: ${t.pathname}`),{url:t,params:{},route:{id:null}}),404)}if(t=$?.url||t,W!==g)return L.reject(new Error("navigation was aborted")),!1;if(E.type==="redirect")if(_>=20)E=await le({status:500,error:await te(new Error("Redirect loop"),{url:t,params:{},route:{id:null}}),url:t,route:{id:null}});else return ie(new URL(E.location,t).href,{},_+1,g),!1;else E.props.page.status>=400&&await B.updated.check()&&await Y(t);v.length=0,se=!1,P=!0,Ne(y),He(k),E.props.page.url.pathname!==t.pathname&&(t.pathname=E.props.page.url.pathname);const U=a?a.state:{};if(!a){const x=f?0:1,R={[q]:j+=x,[K]:F+=x};(f?he:tt).call(history,R,"",t),f||nt(j,F)}if(ae[j]=U,b=null,E.props.page.state=U,N){h=E.state,E.props.page&&(E.props.page.url=t);const x=(await Promise.all(c.on_navigate.map(R=>R(L.navigation)))).filter(R=>typeof R=="function");if(x.length>0){let R=function(){c.after_navigate=c.after_navigate.filter(T=>!x.includes(T))};x.push(R),c.after_navigate.push(...x)}M.$set(E.props),Z=!0}else Ge(E);const{activeElement:V}=document;await xe();const G=a?a.scroll:l?Te():null;if(O){const x=t.hash&&document.getElementById(decodeURIComponent(t.hash.slice(1)));G?scrollTo(G.x,G.y):x?x.scrollIntoView():scrollTo(0,0)}const J=document.activeElement!==V&&document.activeElement!==document.body;!o&&!J&&Ue(),O=!0,E.props.page&&(I=E.props.page),A=!1,n==="popstate"&&Ve(F),L.fulfil(void 0),c.after_navigate.forEach(x=>x(L.navigation)),B.navigating.set(null),P=!1}async function We(n,t,a,o){return n.origin===ke&&n.pathname===location.pathname&&!w?await le({status:o,error:a,url:n,route:t}):await Y(n)}function _t(){let n;d.addEventListener("mousemove",f=>{const _=f.target;clearTimeout(n),n=setTimeout(()=>{o(_,2)},20)});function t(f){o(f.composedPath()[0],1)}d.addEventListener("mousedown",t),d.addEventListener("touchstart",t,{passive:!0});const a=new IntersectionObserver(f=>{for(const _ of f)_.isIntersecting&&(ce(_.target.href),a.unobserve(_.target))},{threshold:0});function o(f,_){const g=Xe(f,d);if(!g)return;const{url:S,external:m,download:$}=Oe(g,H);if(m||$)return;const L=de(g);if(!L.reload)if(_<=L.preload_data){const y=ee(S,!1);y&&Be(y)}else _<=L.preload_code&&ce(S.pathname)}function l(){a.disconnect();for(const f of d.querySelectorAll("a")){const{url:_,external:g,download:S}=Oe(f,H);if(g||S)continue;const m=de(f);m.reload||(m.preload_code===Ze.viewport&&a.observe(f),m.preload_code===Ze.eager&&ce(_.pathname))}}c.after_navigate.push(l),l()}function te(n,t){if(n instanceof _e)return n.body;const a=pe(n),o=Xt(n);return e.hooks.handleError({error:n,event:t,status:a,message:o})??{message:o}}return{after_navigate:n=>{Ee(()=>(c.after_navigate.push(n),()=>{const t=c.after_navigate.indexOf(n);c.after_navigate.splice(t,1)}))},before_navigate:n=>{Ee(()=>(c.before_navigate.push(n),()=>{const t=c.before_navigate.indexOf(n);c.before_navigate.splice(t,1)}))},on_navigate:n=>{Ee(()=>(c.on_navigate.push(n),()=>{const t=c.on_navigate.indexOf(n);c.on_navigate.splice(t,1)}))},disable_scroll_handling:()=>{(P||!N)&&(O=!1)},goto:(n,t={})=>(n=ne(n),n.origin!==ke?Promise.reject(new Error("goto: invalid URL")):ie(n,t,0)),invalidate:n=>{if(typeof n=="function")v.push(n);else{const{href:t}=new URL(n,location.href);v.push(a=>a.href===t)}return Me()},invalidate_all:()=>(se=!0,Me()),preload_data:async n=>{const t=ne(n),a=ee(t,!1);if(!a)throw new Error(`Attempted to preload a URL that does not belong to this app: ${t}`);const o=await Be(a);if(o.type==="redirect")return{type:o.type,location:o.location};const{status:l,data:f}=o.props.page??I;return{type:o.type,status:l,data:f}},preload_code:n=>ce(n),push_state:(n,t)=>{const a={[q]:j+=1,[K]:F,[Ae]:I.url.href};tt.call(history,a,"",ne(n)),I={...I,state:t},M.$set({page:I}),ae[j]=t,nt(j,F)},replace_state:(n,t)=>{const a={[q]:j,[K]:F,[Ae]:I.url.href};he.call(history,a,"",ne(n)),I={...I,state:t},M.$set({page:I}),ae[j]=t},apply_action:async n=>{if(n.type==="error"){const t=new URL(location.href),{branch:a,route:o}=h;if(!o)return;const l=await Ke(h.branch.length,a,o.errors);if(l){const f=await Q({url:t,params:h.params,branch:a.slice(0,l.idx).concat(l.node),status:n.status??500,error:n.error,route:o});h=f.state,M.$set(f.props),xe().then(Ue)}}else n.type==="redirect"?ie(n.location,{invalidateAll:!0},0):(M.$set({form:null,page:{...I,form:n.data,status:n.status}}),await xe(),M.$set({form:n.data}),n.type==="success"&&Ue())},_start_router:()=>{history.scrollRestoration="manual",addEventListener("beforeunload",t=>{let a=!1;if(qe(),!A){const o=ot(h,void 0,null,"leave"),l={...o.navigation,cancel:()=>{a=!0,o.reject(new Error("navigation was cancelled"))}};c.before_navigate.forEach(f=>f(l))}a?(t.preventDefault(),t.returnValue=""):history.scrollRestoration="auto"}),addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&qe()}),navigator.connection?.saveData||_t(),d.addEventListener("click",t=>{if(t.button||t.which!==1||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.defaultPrevented)return;const a=Xe(t.composedPath()[0],d);if(!a)return;const{url:o,external:l,target:f,download:_}=Oe(a,H);if(!o)return;if(f==="_parent"||f==="_top"){if(window.parent!==window)return}else if(f&&f!=="_self")return;const g=de(a);if(!(a instanceof SVGAElement)&&o.protocol!==location.protocol&&!(o.protocol==="https:"||o.protocol==="http:")||_)return;if(l||g.reload){ze({url:o,type:"link"})?A=!0:t.preventDefault();return}const[m,$]=o.href.split("#");if($!==void 0&&m===$e(location)){if(h.url.hash===o.hash){t.preventDefault(),a.ownerDocument.getElementById($)?.scrollIntoView();return}if(D=!0,Ne(j),n(o),!g.replace_state)return;D=!1}t.preventDefault(),fe({type:"link",url:o,keepfocus:g.keepfocus,noscroll:g.noscroll,replace_state:g.replace_state??o.href===location.href})}),d.addEventListener("submit",t=>{if(t.defaultPrevented)return;const a=HTMLFormElement.prototype.cloneNode.call(t.target),o=t.submitter;if((o?.formMethod||a.method)!=="get")return;const f=new URL(o?.hasAttribute("formaction")&&o?.formAction||a.action);if(Pe(f,H))return;const _=t.target,g=de(_);if(g.reload)return;t.preventDefault(),t.stopPropagation();const S=new FormData(_),m=o?.getAttribute("name");m&&S.append(m,o?.getAttribute("value")??""),f.search=new URLSearchParams(S).toString(),fe({type:"form",url:f,keepfocus:g.keepfocus,noscroll:g.noscroll,replace_state:g.replace_state??f.href===location.href})}),addEventListener("popstate",async t=>{if(t.state?.[q]){const a=t.state[q];if(W={},a===j)return;const o=z[a],l=ae[a]??{},f=new URL(t.state[Ae]??location.href),_=t.state[K],g=$e(location)===$e(h.url);if(_===F&&(Z||g)){n(f),z[j]=Te(),o&&scrollTo(o.x,o.y),l!==I.state&&(I={...I,state:l},M.$set({page:I})),j=a;return}const m=a-j;await fe({type:"popstate",url:f,popped:{state:l,scroll:o,delta:m},accept:()=>{j=a,F=_},block:()=>{history.go(-m)},nav_token:W})}else if(!D){const a=new URL(location.href);n(a)}}),addEventListener("hashchange",()=>{D&&(D=!1,he.call(history,{...history.state,[q]:++j,[K]:F},"",location.href))});for(const t of document.querySelectorAll("link"))t.rel==="icon"&&(t.href=t.href);addEventListener("pageshow",t=>{t.persisted&&B.navigating.set(null)});function n(t){h.url=t,B.page.set({...I,url:t}),B.page.notify()}},_hydrate:async({status:n=200,error:t,node_ids:a,params:o,route:l,data:f,form:_})=>{w=!0;const g=new URL(location.href);({params:o={},route:l={id:null}}=ee(g,!1)||{});let S;try{const m=a.map(async(y,k)=>{const E=f[k];return E?.uses&&(E.uses=pt(E.uses)),ye({loader:e.nodes[y],url:g,params:o,route:l,parent:async()=>{const U={};for(let V=0;V<k;V+=1)Object.assign(U,(await m[V]).data);return U},server_data_node:ve(E)})}),$=await Promise.all(m),L=s.find(({id:y})=>y===l.id);if(L){const y=L.layouts;for(let k=0;k<y.length;k++)y[k]||$.splice(k,0,void 0)}S=await Q({url:g,params:o,branch:$,status:n,error:t,form:_,route:L??null})}catch(m){if(m instanceof et){await Y(new URL(m.location,location.href));return}S=await le({status:pe(m),error:await te(m,{url:g,params:o,route:l}),url:g,route:l})}S.props.page&&(S.props.page.state={}),Ge(S)}}}async function rt(e,r){const s=new URL(e);s.pathname=It(e.pathname),e.pathname.endsWith("/")&&s.searchParams.append(Wt,"1"),s.searchParams.append(zt,r.map(u=>u?"1":"0").join(""));const i=await ut(s.href);if(i.headers.get("content-type")?.includes("text/html")&&await Y(e),!i.ok)throw new _e(i.status,await i.json());return new Promise(async u=>{const d=new Map,v=i.body.getReader(),p=new TextDecoder;function b(h){return St(h,{Promise:w=>new Promise((N,O)=>{d.set(w,{fulfil:N,reject:O})})})}let c="";for(;;){const{done:h,value:w}=await v.read();if(h&&!c)break;for(c+=!w&&c?`
`:p.decode(w);;){const N=c.indexOf(`
`);if(N===-1)break;const O=JSON.parse(c.slice(0,N));if(c=c.slice(N+1),O.type==="redirect")return u(O);if(O.type==="data")O.nodes?.forEach(P=>{P?.type==="data"&&(P.uses=pt(P.uses),P.data=b(P.data))}),u(O);else if(O.type==="chunk"){const{id:P,data:A,error:D}=O,Z=d.get(P);d.delete(P),D?Z.reject(b(D)):Z.fulfil(b(A))}}}})}function pt(e){return{dependencies:new Set(e?.dependencies??[]),params:new Set(e?.params??[]),parent:!!e?.parent,route:!!e?.route,url:!!e?.url,search_params:new Set(e?.search_params??[])}}function Ue(){const e=document.querySelector("[autofocus]");if(e)e.focus();else{const r=document.body,s=r.getAttribute("tabindex");r.tabIndex=-1,r.focus({preventScroll:!0,focusVisible:!1}),s!==null?r.setAttribute("tabindex",s):r.removeAttribute("tabindex");const i=getSelection();if(i&&i.type!=="None"){const u=[];for(let d=0;d<i.rangeCount;d+=1)u.push(i.getRangeAt(d));setTimeout(()=>{if(i.rangeCount===u.length){for(let d=0;d<i.rangeCount;d+=1){const v=u[d],p=i.getRangeAt(d);if(v.commonAncestorContainer!==p.commonAncestorContainer||v.startContainer!==p.startContainer||v.endContainer!==p.endContainer||v.startOffset!==p.startOffset||v.endOffset!==p.endOffset)return}i.removeAllRanges()}})}}}function ot(e,r,s,i){let u,d;const v=new Promise((b,c)=>{u=b,d=c});return v.catch(()=>{}),{navigation:{from:{params:e.params,route:{id:e.route?.id??null},url:e.url},to:s&&{params:r?.params??null,route:{id:r?.route?.id??null},url:s},willUnload:!r,type:i,complete:v},fulfil:u,reject:d}}async function nn(e,r,s){const i=Zt(e,r);gt({client:i}),s?await i._hydrate(s):i.goto(location.href,{replaceState:!0}),i._start_router()}export{nn as start};

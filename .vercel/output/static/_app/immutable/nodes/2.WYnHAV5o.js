import{r as At,s as Tt,n as Z,f as dt,h as tt,i as ft,j as Pt}from"../chunks/5.fiZnZ7H9.js";import{o as Q,n as X,S as Mt,i as Ct,A as pt,B as ht,b as L,d as $,g as c,k as W,j as g,v as mt,e as T,s as O,t as et,w as _t,h as Lt,c as M,a as I,f as at,x as St,m as nt,y as vt,l as st,q as gt,z as bt,C as q,D as Dt,E as Nt,u as yt}from"../chunks/index.rYFs_6OB.js";import{p as Ot}from"../chunks/parse.RrI1B0B4.js";import{c as It,a as Ut}from"../chunks/singletons.0WwMJaGU.js";function wt(n){return n?.length!==void 0?n:Array.from(n)}function Ht(n,t){Q(n,1,1,()=>{t.delete(n.key)})}function Vt(n,t,l,e,r,u,d,_,v,s,b,E){let p=n.length,h=u.length,i=p;const y={};for(;i--;)y[n[i].key]=i;const m=[],w=new Map,k=new Map,U=[];for(i=h;i--;){const f=E(r,u,i),x=l(f);let a=d.get(x);a?e&&U.push(()=>a.p(f,t)):(a=s(x,f),a.c()),w.set(x,m[i]=a),x in y&&k.set(x,Math.abs(i-y[x]))}const N=new Set,S=new Set;function C(f){X(f,1),f.m(_,b),d.set(f.key,f),b=f.first,h--}for(;p&&h;){const f=m[h-1],x=n[p-1],a=f.key,o=x.key;f===x?(b=f.first,p--,h--):w.has(o)?!d.has(a)||N.has(a)?C(f):S.has(o)?p--:k.get(a)>k.get(o)?(S.add(a),C(f)):(N.add(o),p--):(v(x,d),p--)}for(;p--;){const f=n[p];w.has(f.key)||v(f,d)}for(;h;)C(m[h-1]);return At(U),m}function jt(n){let t,l;return{c(){t=pt("svg"),l=pt("path"),this.h()},l(e){t=ht(e,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=L(t);l=ht(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),L(l).forEach($),r.forEach($),this.h()},h(){c(l,"stroke-linecap","round"),c(l,"stroke-linejoin","round"),c(l,"d","M8.25 9V5.25A2.25 2.25 0 0 1 10.5 3h6a2.25 2.25 0 0 1 2.25 2.25v13.5A2.25 2.25 0 0 1 16.5 21h-6a2.25 2.25 0 0 1-2.25-2.25V15m-3 0-3-3m0 0 3-3m-3 3H15"),c(t,"xmlns","http://www.w3.org/2000/svg"),c(t,"fill","none"),c(t,"viewBox","0 0 24 24"),c(t,"stroke-width","1.5"),c(t,"stroke","currentColor"),c(t,"class","w-6 h-6")},m(e,r){W(e,t,r),g(t,l)},p:Z,i:Z,o:Z,d(e){e&&$(t)}}}class $t extends Mt{constructor(t){super(),Ct(this,t,null,jt,Tt,{})}}const Bt=It("invalidate_all");function Rt(n){return Ut.apply_action(n)}function zt(n){const t=JSON.parse(n);return t.data&&(t.data=Ot(t.data)),t}function Et(n){return HTMLElement.prototype.cloneNode.call(n)}function lt(n,t=()=>{}){const l=async({action:r,result:u,reset:d=!0,invalidateAll:_=!0})=>{u.type==="success"&&(d&&HTMLFormElement.prototype.reset.call(n),_&&await Bt()),(location.origin+location.pathname===r.origin+r.pathname||u.type==="redirect"||u.type==="error")&&Rt(u)};async function e(r){if((r.submitter?.hasAttribute("formmethod")?r.submitter.formMethod:Et(n).method)!=="post")return;r.preventDefault();const d=new URL(r.submitter?.hasAttribute("formaction")?r.submitter.formAction:Et(n).action),_=new FormData(n),v=r.submitter?.getAttribute("name");v&&_.append(v,r.submitter?.getAttribute("value")??"");const s=new AbortController;let b=!1;const p=await t({action:d,cancel:()=>b=!0,controller:s,formData:_,formElement:n,submitter:r.submitter})??l;if(b)return;let h;try{const i=await fetch(d,{method:"POST",headers:{accept:"application/json","x-sveltekit-action":"true"},cache:"no-store",body:_,signal:s.signal});h=zt(await i.text()),h.type==="error"&&(h.status=i.status)}catch(i){if(i?.name==="AbortError")return;h={type:"error",error:i}}p({action:d,formData:_,formElement:n,update:i=>l({action:d,result:h,reset:i?.reset,invalidateAll:i?.invalidateAll}),result:h})}return HTMLFormElement.prototype.addEventListener.call(n,"submit",e),{destroy(){HTMLFormElement.prototype.removeEventListener.call(n,"submit",e)}}}function Ft(n){const t=n-1;return t*t*t+1}function qt(n,{delay:t=0,duration:l=400,easing:e=Ft,x:r=0,y:u=0,opacity:d=0}={}){const _=getComputedStyle(n),v=+_.opacity,s=_.transform==="none"?"":_.transform,b=v*(1-d),[E,p]=dt(r),[h,i]=dt(u);return{delay:t,duration:l,easing:e,css:(y,m)=>`
			transform: ${s} translate(${(1-y)*E}${p}, ${(1-y)*h}${i});
			opacity: ${v-b*m}`}}function Wt(n,{delay:t=0,duration:l=400,easing:e=Ft,axis:r="y"}={}){const u=getComputedStyle(n),d=+u.opacity,_=r==="y"?"height":"width",v=parseFloat(u[_]),s=r==="y"?["top","bottom"]:["left","right"],b=s.map(w=>`${w[0].toUpperCase()}${w.slice(1)}`),E=parseFloat(u[`padding${b[0]}`]),p=parseFloat(u[`padding${b[1]}`]),h=parseFloat(u[`margin${b[0]}`]),i=parseFloat(u[`margin${b[1]}`]),y=parseFloat(u[`border${b[0]}Width`]),m=parseFloat(u[`border${b[1]}Width`]);return{delay:t,duration:l,easing:e,css:w=>`overflow: hidden;opacity: ${Math.min(w*20,1)*d};${_}: ${w*v}px;padding-${s[0]}: ${w*E}px;padding-${s[1]}: ${w*p}px;margin-${s[0]}: ${w*h}px;margin-${s[1]}: ${w*i}px;border-${s[0]}-width: ${w*y}px;border-${s[1]}-width: ${w*m}px;`}}function kt(n,t,l){const e=n.slice();return e[3]=t[l],e}function xt(n,t){let l,e,r,u=t[3].title+"",d,_,v,s,b=t[3].description+"",E,p,h,i,y,m,w,k,U="Complete",N,S,C,f,x,a,o,A="Delete",j,R,H,B,V,P,Y,ot;function rt(){return t[1](t[3])}function it(){return t[2](t[3])}return{key:n,first:null,c(){l=T("li"),e=T("div"),r=T("h2"),d=et(u),v=O(),s=T("p"),E=et(b),p=O(),h=T("div"),i=T("form"),y=T("input"),w=O(),k=T("button"),k.textContent=U,S=O(),C=T("form"),f=T("input"),a=O(),o=T("button"),o.textContent=A,R=O(),this.h()},l(D){l=M(D,"LI",{class:!0});var F=L(l);e=M(F,"DIV",{class:!0});var z=L(e);r=M(z,"H2",{class:!0});var ct=L(r);d=at(ct,u),ct.forEach($),v=I(z),s=M(z,"P",{});var ut=L(s);E=at(ut,b),ut.forEach($),p=I(z),h=M(z,"DIV",{class:!0});var J=L(h);i=M(J,"FORM",{method:!0,action:!0});var G=L(i);y=M(G,"INPUT",{class:!0,name:!0}),w=I(G),k=M(G,"BUTTON",{class:!0,"data-svelte-h":!0}),nt(k)!=="svelte-9dytgh"&&(k.textContent=U),G.forEach($),S=I(J),C=M(J,"FORM",{method:!0,action:!0});var K=L(C);f=M(K,"INPUT",{class:!0,name:!0}),a=I(K),o=M(K,"BUTTON",{class:!0,"data-svelte-h":!0}),nt(o)!=="svelte-14xe8rt"&&(o.textContent=A),K.forEach($),J.forEach($),z.forEach($),R=I(F),F.forEach($),this.h()},h(){c(r,"class",_="card-title "+(t[3].completed&&"line-through")),q(s,"line-through",t[3].completed),c(y,"class","hidden"),c(y,"name","id"),y.value=m=t[3].id,c(k,"class","btn"),q(k,"btn-success",!t[3].completed),q(k,"btn-disabled",t[3].completed),c(i,"method","POST"),c(i,"action","?/complete"),c(f,"class","hidden"),c(f,"name","id"),f.value=x=t[3].id,c(o,"class","btn btn-error"),c(C,"method","POST"),c(C,"action","?/delete"),c(h,"class","card-actions justify-end pt-4"),c(e,"class","card-body"),c(l,"class",H="card shadow-xl transition-colors "+(t[3].completed?"bg-green-500":"bg-base-300")),this.first=l},m(D,F){W(D,l,F),g(l,e),g(e,r),g(r,d),g(e,v),g(e,s),g(s,E),g(e,p),g(e,h),g(h,i),g(i,y),g(i,w),g(i,k),g(h,S),g(h,C),g(C,f),g(C,a),g(C,o),g(l,R),P=!0,Y||(ot=[tt(N=lt.call(null,i,rt)),tt(j=lt.call(null,C,it))],Y=!0)},p(D,F){t=D,(!P||F&1)&&u!==(u=t[3].title+"")&&st(d,u),(!P||F&1&&_!==(_="card-title "+(t[3].completed&&"line-through")))&&c(r,"class",_),(!P||F&1)&&b!==(b=t[3].description+"")&&st(E,b),(!P||F&1)&&q(s,"line-through",t[3].completed),(!P||F&1&&m!==(m=t[3].id)&&y.value!==m)&&(y.value=m),(!P||F&1)&&q(k,"btn-success",!t[3].completed),(!P||F&1)&&q(k,"btn-disabled",t[3].completed),N&&ft(N.update)&&F&1&&N.update.call(null,rt),(!P||F&1&&x!==(x=t[3].id)&&f.value!==x)&&(f.value=x),j&&ft(j.update)&&F&1&&j.update.call(null,it),(!P||F&1&&H!==(H="card shadow-xl transition-colors "+(t[3].completed?"bg-green-500":"bg-base-300")))&&c(l,"class",H)},i(D){P||(D&&Pt(()=>{P&&(V&&V.end(1),B=Dt(l,qt,{y:20}),B.start())}),P=!0)},o(D){B&&B.invalidate(),D&&(V=Nt(l,Wt,{})),P=!1},d(D){D&&$(l),D&&V&&V.end(),Y=!1,At(ot)}}}function Jt(n){let t,l,e,r,u=`${n[0].userPayload.firstName} ${n[0].userPayload.lastName}`,d,_,v,s,b,E,p,h='<label for="title" class="form-control w-full"><div class="label"><span class="label-text">Title</span></div> <input type="text" id="title" name="title" class="input input-bordered w-full"/></label> <label for="description" class="form-control w-full"><div class="label"><span class="label-text">Description</span></div> <input type="text" id="description" name="description" class="input input-bordered w-full"/></label> <button class="btn btn-neutral">Add Todo</button>',i,y,m=[],w=new Map,k,U,N;var S=$t;function C(a,o){return{}}S&&(s=mt(S,C()));let f=wt(n[0].todos);const x=a=>a[3].id;for(let a=0;a<f.length;a+=1){let o=kt(n,f,a),A=x(o);w.set(A,m[a]=xt(A,o))}return{c(){t=T("meta"),l=O(),e=T("div"),r=T("span"),d=et(u),_=O(),v=T("a"),s&&_t(s.$$.fragment),b=O(),E=T("div"),p=T("form"),p.innerHTML=h,i=O(),y=T("ul");for(let a=0;a<m.length;a+=1)m[a].c();this.h()},l(a){const o=Lt("svelte-1ux7tjd",document.head);t=M(o,"META",{name:!0,content:!0}),o.forEach($),l=I(a),e=M(a,"DIV",{class:!0});var A=L(e);r=M(A,"SPAN",{});var j=L(r);d=at(j,u),j.forEach($),_=I(A),v=M(A,"A",{href:!0,class:!0});var R=L(v);s&&St(s.$$.fragment,R),R.forEach($),A.forEach($),b=I(a),E=M(a,"DIV",{class:!0});var H=L(E);p=M(H,"FORM",{class:!0,method:!0,action:!0,"data-svelte-h":!0}),nt(p)!=="svelte-1aelawr"&&(p.innerHTML=h),i=I(H),y=M(H,"UL",{class:!0});var B=L(y);for(let V=0;V<m.length;V+=1)m[V].l(B);B.forEach($),H.forEach($),this.h()},h(){document.title="Todos",c(t,"name","description"),c(t,"content","Create, delete and complete your todos"),c(v,"href","/logout"),c(v,"class","transition-colors hover:text-white"),c(e,"class","absolute right-[24px] top-[24px] flex gap-3 sm:right-[40px] sm:top-[40px]"),c(p,"class","grid w-full items-end gap-6 py-20 sm:flex"),c(p,"method","POST"),c(p,"action","?/create"),c(y,"class","grid w-full grid-cols-1 gap-4 sm:grid-cols-2"),c(E,"class","flex h-full w-full flex-col items-center")},m(a,o){g(document.head,t),W(a,l,o),W(a,e,o),g(e,r),g(r,d),g(e,_),g(e,v),s&&vt(s,v,null),W(a,b,o),W(a,E,o),g(E,p),g(E,i),g(E,y);for(let A=0;A<m.length;A+=1)m[A]&&m[A].m(y,null);k=!0,U||(N=tt(lt.call(null,p)),U=!0)},p(a,[o]){if((!k||o&1)&&u!==(u=`${a[0].userPayload.firstName} ${a[0].userPayload.lastName}`)&&st(d,u),S!==(S=$t)){if(s){yt();const A=s;Q(A.$$.fragment,1,0,()=>{bt(A,1)}),gt()}S?(s=mt(S,C()),_t(s.$$.fragment),X(s.$$.fragment,1),vt(s,v,null)):s=null}o&1&&(f=wt(a[0].todos),yt(),m=Vt(m,o,x,1,a,f,w,y,Ht,xt,null,kt),gt())},i(a){if(!k){s&&X(s.$$.fragment,a);for(let o=0;o<f.length;o+=1)X(m[o]);k=!0}},o(a){s&&Q(s.$$.fragment,a);for(let o=0;o<m.length;o+=1)Q(m[o]);k=!1},d(a){a&&($(l),$(e),$(b),$(E)),$(t),s&&bt(s);for(let o=0;o<m.length;o+=1)m[o].d();U=!1,N()}}}function Gt(n,t,l){let{data:e}=t;const r=d=>async({result:_})=>{if(_.status===200){const v=e.todos.findIndex(s=>s.id===d.id);l(0,e.todos[v].completed=!0,e)}},u=d=>async({result:_})=>{_.status===200&&l(0,e.todos=e.todos.filter(v=>v.id!==d.id),e)};return n.$$set=d=>{"data"in d&&l(0,e=d.data)},[e,r,u]}class Zt extends Mt{constructor(t){super(),Ct(this,t,Gt,Jt,Tt,{data:0})}}export{Zt as component};
